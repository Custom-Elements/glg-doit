<link rel="import" href="../node_modules/ui-check/src/ui-check.html">
<link rel="import" href="../node_modules/glg-current-user/src/glg-avatar.html">
<link rel="import" href="../node_modules/ui-markdown/src/ui-markdown.html">
<polymer-element name="glg-task-preview" attributes="task username">
<template>
  <link rel="stylesheet" href="../node_modules/ui-fonts/node_modules/ui-font-awesome/icons.less">
  <link rel="stylesheet" type="text/css" href="./glg-task-preview.less">
  <row spaced expand padded on-click="{{editTodo}}">
    <column>
      <ui-check value="{{task.done}}" on-click="{{doneTodo}}"></ui-check>
    </column>
    <column expand>
      <ui-markdown value="{{task.what}}">
      </ui-markdown>
      <row start expand centered>
        <template if="{{task.delegate}}">
          To&nbsp;<glg-avatar username="{{task.delegate}}"></glg-avatar>&nbsp;
        </template>
        <template if="{{delegatedToMe(task)}}">
          For&nbsp;<glg-avatar username="{{task.who}}"></glg-avatar>&nbsp;
        </template>
      </row>
      <template if="{{task.when}}">
        <row>
          <small>
            <span gray class="{{due(task.when)}}">{{task.when | relativeDate}}</span>
          </small>
        </row>
      </template>
      <row>
        <template if="{{task.done}}">
          Done {{task.done | relativeDate}}
        </template>
      </row>
    </column>
  </row>
</template>
<script src="./glg-task-preview.litcoffee"></script>
</polymer-element>
